<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Carlos ç”Ÿæ—¥ä¹‹æ—…</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="fonts.googleapis.com" rel="stylesheet">
    <style>
        /* é€™è£¡æ”¾ CSS */
        :root { --fuji-blue: #003366; --snow-white: #FFFFFF; --warm-gray: #E0E0E0; }
        body { font-family: 'Zen Maru Gothic', sans-serif; background-color: var(--warm-gray); margin: 0; padding-bottom: 100px; }
        header { background: var(--fuji-blue); color: white; padding: 40px 20px 20px; text-align: center; }
        .card { background: rgba(255,255,255,0.9); border-radius: 15px; padding: 15px; margin: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; display: flex; background: white; padding: 15px 0; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); padding-bottom: env(safe-area-inset-bottom); }
        .nav-item { flex: 1; text-align: center; background: none; border: none; font-size: 16px; color: #888; cursor: pointer; }
        .nav-item.active { color: var(--fuji-blue); font-weight: bold; }
        input, button, textarea { width: 100%; padding: 10px; margin-top: 10px; border-radius: 8px; border: 1px solid #ccc; font-family: inherit; }
        button { background: var(--fuji-blue); color: white; border: none; }
        .expense-thumb { width: 50px; height: 50px; object-fit: cover; border-radius: 5px; }
    </style>
</head>
<body>
    <header>
        <h1>Carlos ç”Ÿæ—¥ä¹‹æ—…</h1>
        <p>2025/12/24 ~ 12/31</p>
    </header>

    <main>
        <!-- è¡Œç¨‹ -->
        <section id="tab-schedule" class="tab-content active">
            <div class="card">
                <h3>ğŸ“… 12/24 åå¤å±‹æŠµé”</h3>
                <p>ğŸ“ ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ -> åå¤å±‹å¸‚å€</p>
                <button onclick="window.location.href='maps.apple.com'">Apple Maps å°èˆª</button>
            </div>
        </section>

        <!-- æŒ‡å— (åŒ¯ç‡/è¨˜å¸³) -->
        <section id="tab-guide" class="tab-content">
            <div class="card">
                <h3>ğŸ’° åŒ¯ç‡æ›ç®—</h3>
                <input type="number" id="rate" value="0.215" step="0.001">
                <input type="text" id="jpyExp" placeholder="è¼¸å…¥ç®—å¼ (å¦‚ 1000+500)">
                <button onclick="calc()">è¨ˆç®—æ›ç®—</button>
                <p>çµæœ: <span id="res">0</span> TWD</p>
            </div>
            <div class="card">
                <h3>ğŸ“ è¨˜å¸³</h3>
                <input type="text" id="note" placeholder="å“é …">
                <input type="number" id="amt" placeholder="æ—¥å¹£é‡‘é¡">
                <input type="file" id="pic" accept="image/*">
                <button onclick="saveEx()">å„²å­˜</button>
                <ul id="list" style="list-style:none; padding:0;"></ul>
            </div>
        </section>

        <!-- å¤©æ°£ -->
        <section id="tab-weather" class="tab-content">
            <div class="card">
                <h3>ğŸŒ¦ å¤©æ°£æŸ¥è©¢</h3>
                <button onclick="window.location.href='weather.yahoo.co.jp'">æŸ¥çœ‹æ—¥æœ¬ Yahoo å¤©æ°£</button>
            </div>
        </section>
    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="sw('tab-schedule', this)">è¡Œç¨‹</button>
        <button class="nav-item" onclick="sw('tab-guide', this)">æŒ‡å—</button>
        <button class="nav-item" onclick="sw('tab-weather', this)">å¤©æ°£</button>
    </nav>

    <script>
        // åˆ†é åˆ‡æ›
        function sw(id, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        // åŒ¯ç‡è¨ˆç®—
        function calc() {
            try {
                let j = eval(document.getElementById('jpyExp').value);
                let r = document.getElementById('rate').value;
                document.getElementById('res').innerText = (j * r).toFixed(2);
            } catch(e) { alert('ç®—å¼éŒ¯èª¤'); }
        }

        // è¨˜å¸³å„²å­˜
        let data = JSON.parse(localStorage.getItem('trip_data')) || [];
        function saveEx() {
            let item = { n: document.getElementById('note').value, a: document.getElementById('amt').value };
            data.push(item);
            localStorage.setItem('trip_data', JSON.stringify(data));
            render();
        }

        function render() {
            let l = document.getElementById('list');
            l.innerHTML = data.map(i => `<li>${i.n}: ${i.a} JPY</li>`).join('');
        }
        render();
    </script>
</body>
</html>
